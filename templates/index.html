<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airbnb Property Price Calculator</title>
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- Header -->
                <div class="text-center mb-5">
                    <h1 class="display-4 mb-3">
                        <i class="fas fa-home me-3"></i>
                        Airbnb Price Calculator
                    </h1>
                    <p class="lead text-muted">
                        Upload your Airbnb dataset and get accurate price predictions for your property
                    </p>
                </div>

                <!-- Flash Messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show" role="alert">
                                {% if category == 'success' %}
                                    <i class="fas fa-check-circle me-2"></i>
                                {% else %}
                                    <i class="fas fa-exclamation-triangle me-2"></i>
                                {% endif %}
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}

                <!-- Main Form -->
                <div class="card shadow-lg">
                    <div class="card-header bg-primary text-white">
                        <h3 class="card-title mb-0">
                            <i class="fas fa-calculator me-2"></i>
                            Property Price Estimation
                        </h3>
                    </div>
                    <div class="card-body">
                        <form method="POST" enctype="multipart/form-data" id="priceCalculatorForm">
                            <!-- File Upload Section -->
                            <div class="mb-4">
                                <label for="datafile" class="form-label">
                                    <i class="fas fa-upload me-2"></i>
                                    Upload Your Airbnb Dataset (CSV)
                                </label>
                                <input type="file" class="form-control" id="datafile" name="datafile" accept=".csv" required>
                                <div class="form-text">
                                    Please upload a CSV file containing your Airbnb property data for training the prediction model.
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Property Details Section -->
                            <h5 class="mb-4">
                                <i class="fas fa-info-circle me-2"></i>
                                Property Details
                            </h5>
                            
                            <div class="row">
                                <!-- Basic Property Info -->
                                <div class="col-md-6 mb-3">
                                    <label for="accommodates" class="form-label">Maximum Number of People</label>
                                    <input type="number" class="form-control" id="accommodates" name="accommodates" min="1" max="20" value="4" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="bathrooms" class="form-label">Number of Bathrooms</label>
                                    <input type="number" class="form-control" id="bathrooms" name="bathrooms" min="0" max="10" step="0.5" value="1" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="bedrooms" class="form-label">Number of Bedrooms</label>
                                    <input type="number" class="form-control" id="bedrooms" name="bedrooms" min="0" max="10" value="1" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="beds" class="form-label">Number of Beds</label>
                                    <input type="number" class="form-control" id="beds" name="beds" min="0" max="20" value="1" required>
                                </div>
                            </div>

                            <!-- Booking Requirements -->
                            <h6 class="mb-3 mt-4">
                                <i class="fas fa-calendar-alt me-2"></i>
                                Booking Requirements
                            </h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="minimum_nights" class="form-label">Minimum Nights</label>
                                    <input type="number" class="form-control" id="minimum_nights" name="minimum_nights" min="1" max="365" value="1" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="maximum_nights" class="form-label">Maximum Nights</label>
                                    <input type="number" class="form-control" id="maximum_nights" name="maximum_nights" min="1" max="365" value="30" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="availability_365" class="form-label">Availability Throughout Year (days)</label>
                                    <input type="number" class="form-control" id="availability_365" name="availability_365" min="0" max="365" value="365" required>
                                </div>
                            </div>

                            <!-- Host Information -->
                            <h6 class="mb-3 mt-4">
                                <i class="fas fa-user me-2"></i>
                                Host Information
                            </h6>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="host_is_superhost" name="host_is_superhost">
                                <label class="form-check-label" for="host_is_superhost">
                                    <i class="fas fa-star me-2"></i>
                                    Superhost Status
                                </label>
                            </div>

                            <!-- Review Information -->
                            <h6 class="mb-3 mt-4">
                                <i class="fas fa-comments me-2"></i>
                                Review Information
                            </h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="number_of_reviews" class="form-label">Number of Reviews</label>
                                    <input type="number" class="form-control" id="number_of_reviews" name="number_of_reviews" min="0" max="1000" value="0" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="reviews_per_month" class="form-label">Reviews Per Month</label>
                                    <input type="number" class="form-control" id="reviews_per_month" name="reviews_per_month" min="0" max="50" step="0.1" value="0" required>
                                </div>
                            </div>

                            <!-- Review Scores -->
                            <h6 class="mb-3 mt-4">
                                <i class="fas fa-star-half-alt me-2"></i>
                                Review Scores (0-100)
                            </h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="review_scores_rating" class="form-label">Overall Rating</label>
                                    <input type="number" class="form-control" id="review_scores_rating" name="review_scores_rating" min="0" max="100" value="95" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="review_scores_accuracy" class="form-label">Accuracy</label>
                                    <input type="number" class="form-control" id="review_scores_accuracy" name="review_scores_accuracy" min="0" max="100" value="95" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="review_scores_cleanliness" class="form-label">Cleanliness</label>
                                    <input type="number" class="form-control" id="review_scores_cleanliness" name="review_scores_cleanliness" min="0" max="100" value="95" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="review_scores_checkin" class="form-label">Check-in</label>
                                    <input type="number" class="form-control" id="review_scores_checkin" name="review_scores_checkin" min="0" max="100" value="95" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="review_scores_communication" class="form-label">Communication</label>
                                    <input type="number" class="form-control" id="review_scores_communication" name="review_scores_communication" min="0" max="100" value="95" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="review_scores_location" class="form-label">Location</label>
                                    <input type="number" class="form-control" id="review_scores_location" name="review_scores_location" min="0" max="100" value="95" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="review_scores_value" class="form-label">Value</label>
                                    <input type="number" class="form-control" id="review_scores_value" name="review_scores_value" min="0" max="100" value="95" required>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="text-center mt-4">
                                <button type="submit" class="btn btn-primary btn-lg px-5" id="estimateBtn">
                                    <i class="fas fa-calculator me-2"></i>
                                    <span class="btn-text">Estimate Price</span>
                                    <span class="btn-loading d-none">
                                        <i class="fas fa-spinner fa-spin me-2"></i>
                                        Processing...
                                    </span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Results Section -->
                {% if predicted_price %}
                <div class="card shadow-lg mt-4">
                    <div class="card-header bg-success text-white">
                        <h4 class="card-title mb-0">
                            <i class="fas fa-dollar-sign me-2"></i>
                            Price Estimation Result
                        </h4>
                    </div>
                    <div class="card-body text-center">
                        <div class="display-3 text-success mb-3">
                            ${{ "%.2f"|format(predicted_price) }}
                        </div>
                        <p class="lead text-muted">
                            Estimated nightly price for your Airbnb property
                        </p>
                        <div class="alert alert-info mt-3">
                            <i class="fas fa-info-circle me-2"></i>
                            This price estimate is based on the data you provided and similar properties in your dataset.
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Instructions -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-question-circle me-2"></i>
                            How to Use This Calculator
                        </h5>
                    </div>
                    <div class="card-body">
                        <ol class="mb-0">
                            <li class="mb-2">
                                <strong>Upload your dataset:</strong> Upload a CSV file containing historical Airbnb property data with columns like price, accommodates, bathrooms, bedrooms, etc.
                            </li>
                            <li class="mb-2">
                                <strong>Fill in property details:</strong> Enter the specific characteristics of the property you want to price.
                            </li>
                            <li class="mb-2">
                                <strong>Set review scores:</strong> Input the review scores for different aspects of the property (0-100 scale).
                            </li>
                            <li class="mb-0">
                                <strong>Get your estimate:</strong> Click "Estimate Price" to receive a data-driven price prediction.
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
